<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head th:replace="~{layout/layout :: head}">
  <title>Dashboard - SAMYX</title>
</head>
<body>
<div id="main-wrapper">
  <!-- Header -->
  <header th:replace="~{layout/layout :: header}"></header>

  <!-- Fragmento aside vacío para compatibilidad -->
  <aside th:fragment="sidebar" style="display: none;"></aside>

  <!-- Page wrapper -->
  <div class="page-wrapper">
    <!-- Hero Section -->
    <div class="dashboard-hero">
      <div class="hero-content">
        <h1 class="hero-title">
          Bienvenido a <span class="text-gradient">SAMYX</span>
        </h1>
        <p class="hero-subtitle">
          Sistema de Facturación Electrónica
        </p>
        <div class="hero-date">
          <i class="fas fa-calendar-alt"></i>
          <span id="currentDate"></span>
        </div>
      </div>
      <div class="hero-pattern"></div>
    </div>

    <!-- Container -->
    <div class="container-fluid">
      <!-- Estadísticas de Comprobantes -->
      <div class="stats-section" sec:authorize="hasAnyRole('ROLE_ADMIN','ROLE_USER')">
        <h2 class="section-title">
          <i class="fas fa-chart-line"></i>
          Resumen de Comprobantes
        </h2>

        <div class="stats-grid">
          <!-- Facturas Electrónicas -->
          <div class="stat-card">
            <div class="stat-icon" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
              <i class="fas fa-file-invoice"></i>
            </div>
            <div class="stat-content">
              <h3 class="stat-value" th:text="${tfe ?: '0'}">0</h3>
              <p class="stat-label">Facturas Electrónicas</p>
              <div class="stat-progress">
                <div class="progress-bar"
                     th:style="'width: ' + ${pfe ?: '0'} + '%; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);'">
                </div>
              </div>
              <span class="stat-percentage" th:text="${pfe ?: '0'} + '%'">0%</span>
            </div>
          </div>

          <!-- Notas de Débito -->
          <div class="stat-card">
            <div class="stat-icon" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">
              <i class="fas fa-file-alt"></i>
            </div>
            <div class="stat-content">
              <h3 class="stat-value" th:text="${tnd ?: '0'}">0</h3>
              <p class="stat-label">Notas de Débito</p>
              <div class="stat-progress">
                <div class="progress-bar"
                     th:style="'width: ' + ${pnd ?: '0'} + '%; background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);'">
                </div>
              </div>
              <span class="stat-percentage" th:text="${pnd ?: '0'} + '%'">0%</span>
            </div>
          </div>

          <!-- Notas de Crédito -->
          <div class="stat-card">
            <div class="stat-icon" style="background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);">
              <i class="fas fa-file-invoice-dollar"></i>
            </div>
            <div class="stat-content">
              <h3 class="stat-value" th:text="${tnc ?: '0'}">0</h3>
              <p class="stat-label">Notas de Crédito</p>
              <div class="stat-progress">
                <div class="progress-bar"
                     th:style="'width: ' + ${pnc ?: '0'} + '%; background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);'">
                </div>
              </div>
              <span class="stat-percentage" th:text="${pnc ?: '0'} + '%'">0%</span>
            </div>
          </div>

          <!-- Tiquetes Electrónicos -->
          <div class="stat-card">
            <div class="stat-icon" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">
              <i class="fas fa-receipt"></i>
            </div>
            <div class="stat-content">
              <h3 class="stat-value" th:text="${tte ?: '0'}">0</h3>
              <p class="stat-label">Tiquetes Electrónicos</p>
              <div class="stat-progress">
                <div class="progress-bar"
                     th:style="'width: ' + ${pte ?: '0'} + '%; background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);'">
                </div>
              </div>
              <span class="stat-percentage" th:text="${pte ?: '0'} + '%'">0%</span>
            </div>
          </div>

          <!-- Factura Electrónica Compra -->
          <div class="stat-card">
            <div class="stat-icon" style="background: linear-gradient(135deg, #4fc3f7 0%, #29b6f6 100%);">
              <i class="fas fa-shopping-cart"></i>
            </div>
            <div class="stat-content">
              <h3 class="stat-value" th:text="${tfec ?: '0'}">0</h3>
              <p class="stat-label">Facturas de Compra</p>
              <div class="stat-progress">
                <div class="progress-bar"
                     th:style="'width: ' + ${pfec ?: '0'} + '%; background: linear-gradient(135deg, #4fc3f7 0%, #29b6f6 100%);'">
                </div>
              </div>
              <span class="stat-percentage" th:text="${pfec ?: '0'} + '%'">0%</span>
            </div>
          </div>

          <!-- Factura Electrónica Exportación -->
          <div class="stat-card">
            <div class="stat-icon" style="background: linear-gradient(135deg, #66bb6a 0%, #43a047 100%);">
              <i class="fas fa-globe-americas"></i>
            </div>
            <div class="stat-content">
              <h3 class="stat-value" th:text="${tfee ?: '0'}">0</h3>
              <p class="stat-label">Facturas de Exportación</p>
              <div class="stat-progress">
                <div class="progress-bar"
                     th:style="'width: ' + ${pfee ?: '0'} + '%; background: linear-gradient(135deg, #66bb6a 0%, #43a047 100%);'">
                </div>
              </div>
              <span class="stat-percentage" th:text="${pfee ?: '0'} + '%'">0%</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Menú Principal -->
      <div class="main-menu-section">
        <h2 class="section-title">
          <i class="fas fa-th-large"></i>
          Accesos Rápidos
        </h2>

        <div class="menu-grid">
          <!-- Clientes -->
          <a th:href="@{/clientes/}" class="menu-card">
            <div class="menu-card-content">
              <div class="menu-icon-wrapper" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                <i class="fas fa-users"></i>
              </div>
              <h3 class="menu-title">Clientes</h3>
              <p class="menu-description">Gestiona tu cartera de clientes</p>
              <span class="menu-arrow">
                                    <i class="fas fa-arrow-right"></i>
                                </span>
            </div>
            <div class="menu-card-bg"></div>
          </a>

          <!-- Productos -->
          <a th:href="@{/productos/}" class="menu-card" sec:authorize="hasAnyRole('ROLE_ADMIN','ROLE_USER')">
            <div class="menu-card-content">
              <div class="menu-icon-wrapper" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">
                <i class="fas fa-boxes"></i>
              </div>
              <h3 class="menu-title">Productos</h3>
              <p class="menu-description">Administra tu inventario</p>
              <span class="menu-arrow">
                                    <i class="fas fa-arrow-right"></i>
                                </span>
            </div>
            <div class="menu-card-bg"></div>
          </a>

          <!-- Facturar -->
          <a th:href="@{/facturar/?f=all}" class="menu-card">
            <div class="menu-card-content">
              <div class="menu-icon-wrapper" style="background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);">
                <i class="fas fa-file-invoice"></i>
              </div>
              <h3 class="menu-title">Facturar</h3>
              <p class="menu-description">Crea nuevas facturas</p>
              <span class="menu-arrow">
                                    <i class="fas fa-arrow-right"></i>
                                </span>
            </div>
            <div class="menu-card-bg"></div>
          </a>

          <!-- Comprobantes -->
          <a th:href="@{/fe-documentos/}" class="menu-card" sec:authorize="hasAnyRole('ROLE_ADMIN','ROLE_USER')">
            <div class="menu-card-content">
              <div class="menu-icon-wrapper" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">
                <i class="fas fa-folder-open"></i>
              </div>
              <h3 class="menu-title">Comprobantes</h3>
              <p class="menu-description">Documentos electrónicos</p>
              <span class="menu-arrow">
                                    <i class="fas fa-arrow-right"></i>
                                </span>
            </div>
            <div class="menu-card-bg"></div>
          </a>

          <!-- Mensaje Receptor -->
          <a th:href="@{/mensaje-receptor/}" class="menu-card" sec:authorize="hasAnyRole('ROLE_ADMIN','ROLE_USER')">
            <div class="menu-card-content">
              <div class="menu-icon-wrapper" style="background: linear-gradient(135deg, #4fc3f7 0%, #29b6f6 100%);">
                <i class="fas fa-envelope-open-text"></i>
              </div>
              <h3 class="menu-title">Mensaje Receptor</h3>
              <p class="menu-description">Gestión de mensajes</p>
              <span class="menu-arrow">
                                    <i class="fas fa-arrow-right"></i>
                                </span>
            </div>
            <div class="menu-card-bg"></div>
          </a>
        </div>
      </div>

    </div>
  </div>

  <!-- Footer -->
  <footer th:replace="~{layout/layout :: footer}"></footer>
</div>

<!-- Scripts -->
<div th:replace="~{layout/layout :: scripts}"></div>

<!-- CSS específico de esta página -->
<link th:href="@{/css/pages/dashboard.css}" rel="stylesheet" />

<!-- JavaScript específico de esta página -->
<script th:src="@{/js/pages/dashboard.js}"></script>
</body>
</html>