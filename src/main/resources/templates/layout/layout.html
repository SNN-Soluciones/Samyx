<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head th:fragment="head">
	<meta http-equiv="content-type" content="text/html; charset=utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

	<link rel="icon" type="image/png" sizes="16x16" th:href="@{/images/favicon.png}" />
	<title>Sistema de Facturación Electrónica</title>

	<link th:href="@{/css/bootstrap/css/bootstrap.min.css}" rel="stylesheet" />
	<link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.6-rc.0/css/select2.min.css" rel="stylesheet" />
	<link th:href="@{/assets/bootstrap-datepicker/bootstrap-datepicker.min.css}" rel="stylesheet" />
	<link th:href="@{/css/jquery-ui.min.css}" rel="stylesheet" />
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.1/css/all.css">
	<link rel="stylesheet" href="//cdn.jsdelivr.net/jquery.amaran/0.5.4/amaran.min.css">

	<!-- CSS personalizado del layout -->
	<link th:href="@{/css/layout-samyx.css}" rel="stylesheet" />

	<!-- CSS específico de cada página (opcional) -->
	<th:block th:replace="${customStyles} ?: ~{}"></th:block>
</head>

<body class="fix-header card-no-border logo-center">
<div id="main-wrapper">
	<!-- Header con menú horizontal -->
	<header class="topbar" th:fragment="header">
		<nav class="navbar top-navbar navbar-expand-md navbar-light">
			<div class="navbar-header">
				<a class="navbar-brand" href="#">
					<h1 class="logo-text">SAMYX</h1>
				</a>
			</div>

			<div class="navbar-collapse">
				<!-- Menú principal horizontal -->
				<ul class="navbar-nav mr-auto mt-md-0" id="main-menu">
					<li class="nav-item">
						<a class="nav-link" th:href="@{/}" href="#">
							<i class="fas fa-home"></i>
							<span th:text="#{txt.inicio}">Inicio</span>
						</a>
					</li>

					<li class="nav-item" th:if="${session.SESSION_EMPRESA_ID} != null">
						<a class="nav-link" th:href="@{/clientes/}" href="#">
							<i class="fas fa-users"></i>
							<span th:text="#{txt.clientes}">Clientes</span>
						</a>
					</li>

					<li class="nav-item dropdown" th:if="${session.SESSION_EMPRESA_ID} != null" sec:authorize="hasAnyRole('ROLE_ADMIN','ROLE_USER')">
						<a class="nav-link dropdown-toggle" href="#" data-toggle="dropdown">
							<i class="fas fa-boxes"></i>
							<span th:text="#{txt.inventario}">Inventario</span>
						</a>
						<div class="dropdown-menu dropdown-menu-animated">
							<a class="dropdown-item" th:href="@{/producto-familia/}" th:text="'Familias productos'"></a>
							<a class="dropdown-item" th:href="@{/inventario/proveedores/}" th:text="#{txt.proveedores}"></a>
							<a class="dropdown-item" th:href="@{/inventario/cabys/}">Catálogo CABYS</a>
							<a class="dropdown-item" th:href="@{/productos/}" th:text="#{txt.productos}"></a>
							<a class="dropdown-item" th:href="@{/inventario/factura-compra/}" th:text="'Compra de inventario'"></a>
							<a class="dropdown-item" th:href="@{/inventario/ajuste/}" th:text="'Ajuste inventario'"></a>
							<a class="dropdown-item" th:href="@{/inventario/reportes/}" th:text="'Reportes'"></a>
						</div>
					</li>

					<li class="nav-item" th:if="${session.SESSION_CONTROL_CAJAS} == 'S'">
						<a class="nav-link" th:href="@{/control-cajas/}" href="#">
							<i class="fas fa-money-check"></i>
							<span>Cajas</span>
						</a>
					</li>

					<li class="nav-item dropdown" th:if="${session.SESSION_EMPRESA_ID} != null">
						<a class="nav-link dropdown-toggle" href="#" data-toggle="dropdown">
							<i class="fas fa-file-invoice"></i>
							<span th:text="#{txt.comprobantes}">Comprobantes</span>
						</a>
						<div class="dropdown-menu dropdown-menu-animated">
							<a class="dropdown-item" th:href="@{/facturar/}+'?f=all'" th:text="#{txt.facturar}"></a>
							<a class="dropdown-item" th:if="${session.SESSION_SISTEMA_FARMACIA == 'N'}" th:href="@{/facturar/}">Facturar precio final</a>
							<a class="dropdown-item" th:if="${session.SESSION_SISTEMA_FARMACIA == 'N'}" th:href="@{/prefacturas/}">Prefacturas</a>
							<a class="dropdown-item" th:href="@{/proformas/}">Proformas</a>
							<a class="dropdown-item" th:if="${ #authorization.expression('isAuthenticated()') and #strings.contains(#authentication.principal.authorities,'ROLE_ADMIN')}" th:href="@{/comprobantes-electronicos-api}">Comprobantes API</a>
							<a class="dropdown-item" th:href="@{/comprobantes-electronicos-enviados}">Comprobantes enviados a Hacienda</a>
							<a class="dropdown-item" sec:authorize="hasAnyRole('ROLE_ADMIN','ROLE_USER')" th:href="@{/fe-documentos/}" th:text="#{txt.documentos}"></a>
							<a class="dropdown-item" sec:authorize="hasAnyRole('ROLE_ADMIN','ROLE_USER')" th:href="@{/mensaje-receptor/}" th:text="#{txt.mensaje.receptor}"></a>
							<a class="dropdown-item" sec:authorize="hasAnyRole('ROLE_ADMIN','ROLE_USER')" th:href="@{/mensaje-receptor-inbox/}">Mensaje receptor, bandeja de entrada</a>
							<a class="dropdown-item" sec:authorize="hasAnyRole('ROLE_ADMIN','ROLE_USER')" th:href="@{/consulta-comprobantes-manualmente/}" th:text="#{txt.consulta.documentos.manualmente}"></a>
							<a class="dropdown-item" sec:authorize="hasAnyRole('ROLE_ADMIN','ROLE_USER')" th:href="@{/historicos/}">Históricos otros sistemas</a>
						</div>
					</li>

					<li class="nav-item dropdown" sec:authorize="hasAnyRole('ROLE_ADMIN','ROLE_USER')" th:if="${session.SESSION_EMPRESA_ID} != null">
						<a class="nav-link dropdown-toggle" href="#" data-toggle="dropdown">
							<i class="fas fa-file-export"></i>
							<span th:text="#{txt.cxc}">CXC</span>
						</a>
						<div class="dropdown-menu dropdown-menu-animated">
							<a class="dropdown-item" th:href="@{/cxc/(e='A')}" th:text="#{txt.cxc.cuentas.por.cobrar}"></a>
							<a class="dropdown-item" th:href="@{/cxc/reportes/flujo-de-caja}" th:text="#{txt.cxc.flujo.de.caja}"></a>
							<a class="dropdown-item" th:href="@{/cxc/reportes/reportes}">Reportes</a>
						</div>
					</li>

					<li class="nav-item dropdown" sec:authorize="hasAnyRole('ROLE_ADMIN','ROLE_USER')" th:if="${session.SESSION_EMPRESA_ID} != null">
						<a class="nav-link dropdown-toggle" href="#" data-toggle="dropdown">
							<i class="fas fa-chart-bar"></i>
							<span th:text="#{txt.reportes}">Reportes</span>
						</a>
						<div class="dropdown-menu dropdown-menu-animated">
							<a class="dropdown-item" th:href="@{/reportes/ventas}" th:text="#{txt.reportes.ventas}"></a>
							<a class="dropdown-item" th:href="@{/reportes/ventas-productos}">Reporte ventas por producto</a>
							<a class="dropdown-item" th:href="@{/reportes/compras}" th:text="#{txt.reportes.compras}"></a>
						</div>
					</li>
				</ul>

				<!-- User profile section -->
				<ul class="navbar-nav my-lg-0">
					<li th:if="${ #authorization.expression('isAuthenticated()')}" class="nav-item logout-app d-md-none">
						<form th:action="@{/logout}" method="post">
							<button type="submit" class="dropdown-item"><i class="fas fa-sign-out-alt"></i> <span th:text="#{btn.cerrar.sesion}"></span></button>
						</form>
					</li>

					<li class="nav-item dropdown">
						<a class="nav-link dropdown-toggle text-muted waves-effect waves-dark" href="" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
							<img th:src="@{/images/user.png}" src="" alt="user" class="profile-pic" />
						</a>
						<div class="dropdown-menu dropdown-menu-right dropdown-menu-animated">
							<ul class="dropdown-user">
								<li th:if="${ #authorization.expression('isAuthenticated()')}" style="text-align: center" th:text="'Hola: ' + ${#authentication.getPrincipal().getUsername()}"></li>
								<li role="separator" class="divider"></li>

								<li sec:authorize="hasAnyRole('ROLE_ADMIN')">
									<a th:href="@{/tipo-de-cambio/}">
										<i class="fas fa-exchange-alt"></i> Tipo de cambio monedas
									</a>
								</li>

								<li sec:authorize="hasAnyRole('ROLE_ADMIN','ROLE_USER')">
									<a th:href="@{/catalogos/usuarios}">
										<i class="fa fa-users" aria-hidden="true"></i> <span th:text="#{txt.usuarios}"></span>
									</a>
								</li>

								<li>
									<a th:href="@{/emisor/}">
										<i class="fas fa-building"></i> <span th:text="#{txt.mi.perfil}"></span>
									</a>
								</li>

								<li>
									<a href="#" data-toggle="modal" data-target="#changePassword">
										<i class="fas fa-unlock-alt"></i> <span th:text="#{txt.cambiar.password}"></span>
									</a>
								</li>

								<li>
									<form th:action="@{/logout}" method="post">
										<button type="submit" class="dropdown-item" style="padding:7px 1rem;"><i class="fas fa-sign-out-alt"></i> <span th:text="#{btn.cerrar.sesion}"></span></button>
									</form>
								</li>
							</ul>
						</div>
					</li>
				</ul>
			</div>
		</nav>

		<!-- Alertas -->
		<div class="alert-login-error alert alert-success alert-dismissible fade show" th:if="${param.successPassword}">
			<i class="fa fa-check" aria-hidden="true"></i>
			<span th:text="#{txt.password.change.exito}"></span>
			<button type="button" class="close" data-dismiss="alert" aria-label="Close">
				<span aria-hidden="true">&times;</span>
			</button>
		</div>
		<div class="alert-login-error alert alert-warning alert-dismissible fade show" th:if="${param.errorPassword}">
			<i class="fa fa-exclamation-triangle" aria-hidden="true"></i>
			<span th:text="#{txt.password.change.error}"></span>
			<button type="button" class="close" data-dismiss="alert" aria-label="Close">
				<span aria-hidden="true">&times;</span>
			</button>
		</div>
	</header>

	<!-- Fragmento aside vacío para compatibilidad -->
	<aside th:fragment="sidebar" style="display: none;"></aside>

	<!-- Page wrapper sin sidebar -->
	<div class="page-wrapper">
		<div class="row page-titles">
			<div class="col-md-5 align-self-center">
				<h3 class="text-themecolor">Dashboard</h3>
			</div>
			<div class="col-md-7 align-self-center">
				<ol class="breadcrumb">
					<li class="breadcrumb-item"><a href="javascript:void(0)">Home</a></li>
					<li class="breadcrumb-item active">Dashboard</li>
				</ol>
			</div>
		</div>

		<div class="container-fluid">
			<div class="row">
				<div class="col-12">
					<div class="card">
						<div class="card-body">
							<!-- Contenido de la página -->
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<!-- Footer fijo al final -->
	<footer th:fragment="footer" class="footer">
		<div class="modal fade" id="changePassword" role="dialog" data-backdrop="static" data-keyboard="false">
			<div class="modal-dialog" role="document">
				<div class="modal-content">
					<form id="formChangePass" th:action="@{/usuarios/cambiar-password}" method="post">
						<div class="modal-header">
							<h5 class="modal-title" th:text="#{txt.cambiar.password}"></h5>
							<button type="button" class="close" data-dismiss="modal" aria-label="Close">
								<span aria-hidden="true">&times;</span>
							</button>
						</div>
						<div class="modal-body">
							<div class="form-group">
								<div class="col-xs-12">
									<input class="form-control" type="password" required="required" id="_password" name="password" th:placeholder="#{txt.digite.password}">
								</div>
							</div>
							<div class="form-group">
								<div class="col-xs-12">
									<input class="form-control" type="password" required="required" id="_password2" name="password2" th:placeholder="#{txt.confirme.password}">
								</div>
							</div>
						</div>
						<div class="modal-footer">
							<button type="button" class="btn btn-inverse" data-dismiss="modal"><i class="fa fa-ban" aria-hidden="true"></i>&nbsp; <span th:text="#{btn.cancelar}"></span></button>
							<button type="submit" class="btn btn-primary"><i class="fa fa-floppy-o" aria-hidden="true"></i>&nbsp;<span th:text="#{txt.cambiar.password}"></span></button>
						</div>
					</form>
				</div>
			</div>
		</div>

		<h4 class="titleEmpresa" th:if="${session.SESSION_DATOS_EMPRESA_NOMBRE} != null">Empresa:&nbsp;[(${session.SESSION_DATOS_EMPRESA_NOMBRE})]</h4>
	</footer>
</div>
</div>

<!-- Scripts Fragment -->
<div th:fragment="scripts">
	<script th:src="@{/js/jquery/jquery.min.js}"></script>
	<script th:src="@{/js/jquery-ui.min.js}"></script>
	<script th:src="@{/js/jquery.number.min.js}"></script>
	<script th:src="@{/js/sweetalert.min.js}"></script>
	<script th:src="@{/js/bootstrap/js/popper.min.js}"></script>
	<script th:src="@{/js/bootstrap/js/bootstrap.min.js}"></script>
	<script th:src="@{/js/jquery.slimscroll.js}"></script>
	<script th:src="@{/js/waves.js}"></script>
	<script th:src="@{/js/sticky-kit-master/dist/sticky-kit.min.js}"></script>
	<script th:src="@{/js/sparkline/jquery.sparkline.min.js}"></script>
	<script th:src="@{/assets/bootstrap-datepicker/bootstrap-datepicker.min.js}"></script>
	<script th:src="@{/js/custom.js}"></script>
	<script th:src="@{/js/styleswitcher/jQuery.style.switcher.js}"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.6-rc.0/js/select2.min.js"></script>
	<script src="//cdn.jsdelivr.net/jquery.amaran/0.5.4/jquery.amaran.min.js"></script>
	<script src="https://printjs-4de6.kxcdn.com/print.min.js"></script>

	<!-- JavaScript personalizado del layout -->
	<script th:src="@{/js/layout-samyx.js}"></script>

	<!-- JavaScript específico de cada página (opcional) -->
	<th:block th:replace="${customScripts} ?: ~{}"></th:block>

	<script async src="https://www.googletagmanager.com/gtag/js?id=G-4NVHCBS0P6"></script>
	<script>
		window.dataLayer = window.dataLayer || [];
		function gtag(){dataLayer.push(arguments);}
		gtag('js', new Date());
		gtag('config', 'G-4NVHCBS0P6');
	</script>

	<button style="display:none;" id="btnProcesando" class="btn btn-primary" type="button" disabled="">
		<i class="fas fa-redo fa-spin"></i> Procesando...
	</button>
</div>
</body>
</html>